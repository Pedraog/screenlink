<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Transmitir Tela</title>
  <style>
    body{margin:0;background:#111;color:#eee;font-family:Arial;text-align:center}
    button{font-size:22px;padding:14px 28px;margin-top:40vh;background:#007aff;border:none;color:#fff;border-radius:8px}
  </style>
</head>
<body>
  <button id="btn">Transmitir Minha Tela</button>

<script>
document.getElementById('btn').onclick = async () => {
  const stream = await navigator.mediaDevices.getDisplayMedia({video:true,audio:true});
  const pc = new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]});

  pc.onicecandidate = e => {
    if (e.candidate) return;
    // envia a oferta para o receptor
    window.open("https://webhook.site/#!/"+btoa(JSON.stringify(pc.localDescription)));
  };

  pc.addStream(stream);
  const offer = await pc.createOffer();
  await pc.setLocalDescription(offer);
};
</script>
</body>
</html>
